---
date: 2023-07-10
title: Kprobe
description: Kprobe 可以动态地侵入任何内核例程并无中断的收集调试和性能信息。可以捕获几乎任何内核代码地址，指定命中断点时要调用的处理程序例程。通常使用 kprobe 进行内核调试。kprobe 几乎可以插入到内核中的任何指令上。当指定的函数返回时，返回探针将被触发。通常，基于 Kprobes 的检测被打包为内核模块。该模块的 init 函数安装（“注册”）一个或多个探针，exit 函数则取消注册它们。如 register_kprobe() 之类的注册函数指定探针将被插入的位置以及当探针被击中时将调用哪个处理程序。还有 register_/unregister_probes() 函数用于批量注册/注销一组 probes 。
---

Kprobe 可以动态地侵入任何内核例程并无中断的收集调试和性能信息。可以捕获几乎任何内核代码地址，指定命中断点时要调用的处理程序例程。通常使用 kprobe 进行内核调试。

kprobe 几乎可以插入到内核中的任何指令上。当指定的函数返回时，返回探针将被触发。

通常，基于 Kprobes 的检测被打包为内核模块。该模块的 init 函数安装（“注册”）一个或多个探针，exit 函数则取消注册它们。如 register_kprobe() 之类的注册函数指定探针将被插入的位置以及当探针被击中时将调用哪个处理程序。

还有 register_/unregister_*probes() 函数用于批量注册/注销一组 *probes 。
